{% extends "control/base.html" %}
{% load static %}
{% block title %}Perfil{% endblock title %}
{% block content %}
<div style="padding: 30px; background: linear-gradient(135deg, #EBF4FF 0%, #F8FAFC 100%); min-height: calc(100vh - 70px);">
    <div class="container">
        <div class="row g-4">
            <!-- Card Avatar/Logo - Esquerda Superior -->
            <div class="col-lg-4 col-md-5">
                <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px 20px; text-align: center; min-height: 380px;">
                    <div style="width: 200px; height: 200px; background: #E5E7EB; border-radius: 50%; margin: 16px auto 20px auto; display: flex; align-items: center; justify-content: center;">
                        {% if request.user.imagem_perfil %}
                            <img src="{{ request.user.imagem_perfil.url }}" 
                                alt="Foto de Perfil" 
                                style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        {% else %}
                            <span style="font-size: 14px; color: #6B7280;">Sem foto</span>
                        {% endif %}
                    </div>
                    <h4 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-top: 0; font-size: 1.25rem;">
                        {{ request.user.nome_fantasia }}
                    </h4>
                    <div style="margin-top: 5px;">
                        <h4 style="font-family: 'Inter', sans-serif; font-weight: 500; color: #1F2937; margin: 0px; font-size: 14px;">
                            <i class="bi bi-calendar"></i> Entrou em: {{ request.user.date_joined|date:"M d, Y" }}
                        </h4>
                        <h4 style="font-family: 'Inter', sans-serif; font-weight: 500; color: #1F2937; margin-top: 0px; font-size: 14px;">
                            <i class="bi bi-box-arrow-in-right"></i> Último login: {{ request.user.last_login|date:"H:i" }}
                        </h4>
                    </div>
                </div>
            </div>
            
            <!-- Card Informações - Direita Superior -->
            <div class="col-lg-8 col-md-7">
                <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px; min-height: 380px;">
                    <h5 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-bottom: 25px; font-size: 1.1rem;">
                        Informações empresa
                    </h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Razão Social</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.razao_social|default:"Não registrado" }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">CNPJ</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.cnpj|default:"Não registrado" }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">E-mail</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.email  }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Telefone</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.telefone  }}</p>
                        </div>
                        <div class="col-12">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Endereço</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.endereco|default:"Rua Exemplo, 123 - Cidade/UF" }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Card Vazio/Extra - Esquerda Inferior -->
            <div class="col-lg-4 col-md-5">
                <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px; height: 100%; min-height: 280px;">
                    <h5 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-bottom: 20px; font-size: 1.1rem;">
                        Estatísticas
                    </h5>
                    <div style="text-align: center; padding-top: 20px;">
                        <div style="margin-bottom: 20px;">
                            <p style="font-family: 'Inter', sans-serif; font-size: 2rem; font-weight: 700; color: #2563EB; margin: 0;">{{ total_vendas|default:"0" }}</p>
                            <span style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280;">Vendas concluídas</span>
                        </div>
                        <div>
                            <p style="font-family: 'Inter', sans-serif; font-size: 2rem; font-weight: 700; color: #2563EB; margin: 0;">{{ total_produtos|default:"0" }}</p>
                            <span style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280;">Produtos cadastrados</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Card Informações Administrador - Direita Inferior -->
            <div class="col-lg-8 col-md-7">
                <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px; height: 100%; min-height: 280px;">
                    <h5 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-bottom: 25px; font-size: 1.1rem;">
                        Informações administrador
                    </h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Nome</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.nome_admin|default:"Nome do Administrador" }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">CPF</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.cpf_admin|default:"000.000.000-00" }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">E-mail</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.email_admin|default:"admin@empresa.com" }}</p>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Telefone</label>
                            <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.telefone_admin|default:"(00) 00000-0000" }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="w-100 d-flex" style="justify-content: flex-end; gap: 20px;">
                <a href={% url 'usuarios:editar_perfil' request.user.id  %} class="d-block"><button class="fs-5" style="min-height: 60px; font-family: Inter; color: white; font-weight: 700; border-radius: 15px; background-color: #2563EB; border: none;">Editar Perfil</button></a>
                <a href={% url 'usuarios:alterar_senha'  %} class="d-block"><button class="fs-5" style="min-height: 60px; font-family: Inter; color: white; font-weight: 700; border-radius: 15px; background-color: #2563EB; border: none;">Alterar Senha</button></a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block footer %}{% endblock %}