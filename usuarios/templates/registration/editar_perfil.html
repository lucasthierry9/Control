{% extends "control/base.html" %}
{% load static %}
{% block title %}Perfil{% endblock title %}
{% block content %}
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div style="padding: 30px; background: linear-gradient(135deg, #EBF4FF 0%, #F8FAFC 100%); min-height: calc(100vh - 70px);">
        <div class="container">
            <div class="row g-4">
                <!-- Card Avatar/Logo - Esquerda Superior -->
                <div class="col-lg-4 col-md-5">
                    <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 40px 30px; text-align: center; height: 100%; min-height: 420px;">
                        <div style="width: 150px; height: 150px; background: #E5E7EB; border-radius: 50%; margin: 0 auto 20px auto; display: flex; align-items: center; justify-content: center;">
                            {% if request.user.imagem_perfil %}
                                <img src="{{ request.user.imagem_perfil.url }}" 
                                    alt="Foto de Perfil" 
                                    style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                            {% else %}
                                <span style="font-size: 14px; color: #6B7280;">Sem foto</span>
                            {% endif %}
                        </div>
                        <div style="width: 100%;">
                                <label style="font-family: 'Inter', sans-serif; font-weight: 600; font-size: 14px; color: #374151; display: block; margin-bottom: 8px;">
                                    Alterar Logo
                                </label>
                                <input type="file" name="imagem_perfil" accept="image/*" style="font-family: 'Inter', sans-serif; font-size: 14px; width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; background: #f9fafb;">
                        </div>
                        <input type="text" name="nome_fantasia" value="{{ usuario.nome_fantasia }}" placeholder="Nome fantasia" style="font-family: 'Inter', sans-serif; width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent; text-align: center;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                    </div>
                </div>
                
                <!-- Card Informações - Direita Superior -->
                <div class="col-lg-8 col-md-7">
                    <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px; height: 100%; min-height: 320px;">
                        <h5 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-bottom: 25px; font-size: 1.1rem;">
                            Informações empresa
                        </h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500; display: block;">CNPJ</label>
                                <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.cnpj }}</p>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500; display: block;">Razão Social</label>
                                <p style="font-family: 'Inter', sans-serif; color: #1F2937; margin: 5px 0 0 0;">{{ request.user.razao_social }}</p>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500; display: block;">E-mail</label>
                                <input type="email" name="email" value="{{ usuario.email }}" placeholder="00000-000" style="font-family: 'Inter', sans-serif;  width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500; display: block;">Telefone</label>
                                <input type="text" name="telefone" value="{{ usuario.telefone }}" placeholder="00000-000" style="font-family: 'Inter', sans-serif;  width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                            <div class="col-12">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500; display: block;">Endereço</label>
                                <input type="text" name="endereco" value="{{ usuario.endereco }}" placeholder="Rua Exemplo, 123 - Cidade/UF" style="font-family: 'Inter', sans-serif; width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                            <div class="col-12">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500; display: block;">Logo</label>
                                <input type="file" name="imagem_perfil" accept="image/*" style="font-family: 'Inter', sans-serif; font-size: 14px; width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; background: #f9fafb;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Card Vazio/Extra - Esquerda Inferior -->
                <div class="col-lg-4 col-md-5">
                    <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px; height: 100%; min-height: 280px;">
                        <h5 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-bottom: 20px; font-size: 1.1rem;">
                            Estatísticas
                        </h5>
                        <div style="text-align: center; padding-top: 20px;">
                            <div style="margin-bottom: 20px;">
                                <p style="font-family: 'Inter', sans-serif; font-size: 2rem; font-weight: 700; color: #2563EB; margin: 0;">{{ total_pedidos|default:"0" }}</p>
                                <span style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280;">Pedidos</span>
                            </div>
                            <div>
                                <p style="font-family: 'Inter', sans-serif; font-size: 2rem; font-weight: 700; color: #2563EB; margin: 0;">{{ total_produtos|default:"0" }}</p>
                                <span style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280;">Produtos</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Card Informações Administrador - Direita Inferior -->
                <div class="col-lg-8 col-md-7">
                    <div style="background: #FFFFFF; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 30px; height: 100%; min-height: 280px;">
                        <h5 style="font-family: 'Inter', sans-serif; font-weight: 700; color: #1F2937; margin-bottom: 25px; font-size: 1.1rem;">
                            Informações administrador
                        </h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Nome</label>
                                <input type="text" name="nome_admin" value="{{ usuario.nome_admin }}" placeholder="Nome do Administrador" style="font-family: 'Inter', sans-serif;  width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">CPF</label>
                                <input type="text" name="cpf_admin" value="{{ usuario.cpf_admin }}" placeholder="000.000.000-00" style="font-family: 'Inter', sans-serif;  width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">E-mail</label>
                                <input type="email" name="email_admin" value="{{ usuario.email_admin }}" placeholder="admin@email.com" style="font-family: 'Inter', sans-serif;  width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label style="font-family: 'Inter', sans-serif; font-size: 0.85rem; color: #6B7280; font-weight: 500;">Telefone</label>
                                <input type="tel" name="telefone_admin" value="{{ usuario.telefone_admin }}" placeholder="(00) 00000-0000" style="font-family: 'Inter', sans-serif; width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 8px; background: transparent;" onfocus="this.style.borderColor='#2563EB'" onblur="this.style.borderColor='#d1d5db'">
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button type="submit" class="fs-4 w-100" style="background: #2563EB; color: white; font-weight: 700; border: none; border-radius: 8px; font-family: Inter; font-weight: 700; cursor:pointer; transition:0.2s; border-top-left-radius: 15px; border-bottom-left-radius: 15px;">Salvar alterações
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>
{% endblock %}